<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>WeNers</title>

    <style>
        body { font-family: Arial, sans-serif; background:#fafafa; margin:0; padding:0; }
        header { padding:20px; text-align:center; font-size:26px; font-weight:bold; }
        #productList { max-width:700px; margin:40px auto; }
        .product-card { background:white; border-radius:10px; padding:20px; margin-bottom:15px;
                        box-shadow:0 2px 8px rgba(0,0,0,0.08); }
        button { padding:8px 14px; background:#2563eb; color:#fff; border-radius:8px; border:none; cursor:pointer;}
    </style>

    <!-- âœ” Supabase JS 2.x CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        /* âœ” createClient ë¥¼ ì •ìƒ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì • */
        const client = supabase.createClient(
            "https://wfgqdswcdwdvfaqwejmd.supabase.co",
            "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndmZ3Fkc3djZHdkdmZhcXdlam1kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4MDc2NjcsImV4cCI6MjA4MDM4MzY2N30.Jb9nqalTEPp3Grwy3lnLczl6cE7gTSsK4Ol3hXGdl1Q"
        );

        /* ===============================
           ğŸ”¥ ìƒí’ˆ ë¶ˆëŸ¬ì˜¤ê¸°
        =============================== */
        async function loadProducts() {
            const { data, error } = await client
                .from("products")
                .select("id, title, description, price_start, price_end, buy_now")
                .order("created_at", { ascending: false });

            if (error) {
                alert("âŒ ìƒí’ˆ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨");
                console.error(error);
                return;
            }

            if (!data.length) {
                document.getElementById("productList").innerHTML =
                    `<p style="text-align:center;color:#666;margin-top:50px;">
                        ğŸ“­ ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.
                    </p>`;
                return;
            }

            renderProducts(data);
        }

        /* ===============================
           ğŸ”¥ í™”ë©´ì— ì¶œë ¥
        =============================== */
        function renderProducts(list) {
            const area = document.getElementById("productList");
            area.innerHTML = "";

            list.forEach(p => {
                let box = document.createElement("div");
                box.className = "product-card";

                box.innerHTML = `
                    <h2>${p.title}</h2>
                    <p>${p.description ?? ""}</p>

                    <p><b>ì‹œì‘ê°€:</b> ${p.price_start?.toLocaleString()}ì›</p>
                    ${p.price_end ? `<p><b>ì¢…ë£Œê°€:</b> ${p.price_end.toLocaleString()}ì›</p>` : ""}
                    ${p.buy_now ? `<p><b>ì¦‰ì‹œêµ¬ë§¤ê°€:</b> ${p.buy_now.toLocaleString()}ì›</p>` : ""}

                    <button>ìƒì„¸ë³´ê¸°</button>
                `;

                area.appendChild(box);
            });
        }

        window.onload = loadProducts;
    </script>

</head>
<body>
<header>ğŸ’ ìœ„ë„ˆìŠ¤ (WeNers)</header>
<div id="productList"></div>
</body>
</html>
